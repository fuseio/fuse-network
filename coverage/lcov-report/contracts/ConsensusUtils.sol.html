<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for contracts/ConsensusUtils.sol</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../prettify.css" />
    <link rel="stylesheet" href="../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../index.html">all files</a> / <a href="index.html">contracts/</a> ConsensusUtils.sol
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>0/161</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>0/84</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>0/92</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>0/214</span>
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545
546
547
548
549
550
551
552
553
554
555
556
557
558
559
560
561
562
563
564
565
566
567
568
569
570
571
572
573
574
575
576
577
578
579
580
581
582
583
584
585
586
587
588
589
590
591
592
593
594
595
596
597
598
599
600
601
602
603
604
605
606
607
608
609
610
611
612
613
614
615
616
617
618
619
620
621
622
623
624
625
626
627
628
629
630
631
632
633
634
635
636
637
638
639
640
641
642
643
644
645
646
647
648
649
650
651
652
653
654
655
656
657
658
659
660
661
662
663
664
665
666
667
668
669
670
671
672
673
674
675
676
677
678
679
680
681
682
683
684</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">pragma solidity ^0.4.24;
&nbsp;
import "./abstracts/ValidatorSet.sol";
import "./eternal-storage/EternalStorage.sol";
import "./ProxyStorage.sol";
import "openzeppelin-solidity/contracts/math/SafeMath.sol";
import "openzeppelin-solidity/contracts/math/Math.sol";
&nbsp;
/**
* @title Consensus utility contract
* @author LiorRabin
*/
contract ConsensusUtils is EternalStorage, ValidatorSet {
  using SafeMath for uint256;
&nbsp;
  uint256 public constant DECIMALS = 10 ** 18;
  uint256 public constant MAX_VALIDATORS = 100;
  uint256 public constant MIN_STAKE = 1e23; // 100,000
  uint256 public constant MAX_STAKE = 5e24; // 5,000,000
  uint256 public constant CYCLE_DURATION_BLOCKS = 34560; // 48 hours [48*60*60/5]
  uint256 public constant SNAPSHOTS_PER_CYCLE = 0; // snapshot each 288 minutes [34560/10/60*5]
  uint256 public constant DEFAULT_VALIDATOR_FEE = 15e16; // 15%
  uint256 public constant VALIDATOR_PRODUCTIVITY_BP = 3000; // 30%
  uint256 public constant MAX_STRIKE_COUNT = 5;
  uint256 public constant STRIKE_RESET = 50; // reset strikes after 50 clean cycles
&nbsp;
  /**
  * @dev This event will be emitted after a change to the validator set has been finalized
  * @param newSet array of addresses which represent the new validator set
  */
  event ChangeFinalized(address[] newSet);
&nbsp;
  /**
  * @dev This event will be emitted on cycle end to indicate the `emitInitiateChange` function needs to be called to apply a new validator set
  */
  event ShouldEmitInitiateChange();
&nbsp;
  /**
  * @dev This modifier verifies that the change initiated has not been finalized yet
  */
<span class="fstat-no" title="function not covered" >  modifier notFinalized() {</span>
<span class="cstat-no" title="statement not covered" >    require(!isFinalized())</span>;
    _;
  }
&nbsp;
  /**
  * @dev This modifier verifies that msg.sender is the system address (EIP96)
  */
<span class="fstat-no" title="function not covered" >  modifier onlySystem() {</span>
<span class="cstat-no" title="statement not covered" >    require(msg.sender == addressStorage[SYSTEM_ADDRESS])</span>;
    _;
  }
&nbsp;
  /**
  * @dev This modifier verifies that msg.sender is the owner of the contract
  */
<span class="fstat-no" title="function not covered" >  modifier onlyOwner() {</span>
<span class="cstat-no" title="statement not covered" >    require(msg.sender == addressStorage[OWNER])</span>;
    _;
  }
&nbsp;
  /**
  * @dev This modifier verifies that msg.sender is the block reward contract
  */
<span class="fstat-no" title="function not covered" >  modifier onlyBlockReward() {</span>
<span class="cstat-no" title="statement not covered" >    require(msg.sender == ProxyStorage(getProxyStorage()).getBlockReward())</span>;
    _;
  }
&nbsp;
  /**
  * @dev This modifier verifies that msg.sender is a validator
  */
<span class="fstat-no" title="function not covered" >  modifier onlyValidator() {</span>
<span class="cstat-no" title="statement not covered" >    require(isValidator(msg.sender))</span>;
    _;
  }
&nbsp;
  /**
  * @dev This modifier verifies that msg.sender is currently jailed
  */
<span class="fstat-no" title="function not covered" >  modifier onlyJailedValidator() {</span>
<span class="cstat-no" title="statement not covered" >    require(isJailed(msg.sender))</span>;
    _;
  }
&nbsp;
  bytes32 internal constant OWNER = keccak256(abi.encodePacked("owner"));
  bytes32 internal constant SYSTEM_ADDRESS = keccak256(abi.encodePacked("SYSTEM_ADDRESS"));
  bytes32 internal constant IS_FINALIZED = keccak256(abi.encodePacked("isFinalized"));
  bytes32 internal constant CURRENT_CYCLE_START_BLOCK = keccak256(abi.encodePacked("currentCycleStartBlock"));
  bytes32 internal constant CURRENT_CYCLE_END_BLOCK = keccak256(abi.encodePacked("currentCycleEndBlock"));
  bytes32 internal constant LAST_SNAPSHOT_TAKEN_AT_BLOCK = keccak256(abi.encodePacked("lastSnapshotTakenAtBlock"));
  bytes32 internal constant NEXT_SNAPSHOT_ID = keccak256(abi.encodePacked("nextSnapshotId"));
  bytes32 internal constant CURRENT_VALIDATORS = keccak256(abi.encodePacked("currentValidators"));
  bytes32 internal constant PENDING_VALIDATORS = keccak256(abi.encodePacked("pendingValidators"));
  bytes32 internal constant PROXY_STORAGE = keccak256(abi.encodePacked("proxyStorage"));
  bytes32 internal constant WAS_PROXY_STORAGE_SET = keccak256(abi.encodePacked("wasProxyStorageSet"));
  bytes32 internal constant NEW_VALIDATOR_SET = keccak256(abi.encodePacked("newValidatorSet"));
  bytes32 internal constant SHOULD_EMIT_INITIATE_CHANGE = keccak256(abi.encodePacked("shouldEmitInitiateChange"));
  bytes32 internal constant TOTAL_STAKE_AMOUNT = keccak256(abi.encodePacked("totalStakeAmount"));
  bytes32 internal constant JAILED_VALIDATORS = keccak256(abi.encodePacked("jailedValidators"));
&nbsp;
<span class="fstat-no" title="function not covered" >  function _delegate(address _staker, uint256 _amount, address _validator) internal {</span>
<span class="cstat-no" title="statement not covered" >    require(_staker != address(0))</span>;
<span class="cstat-no" title="statement not covered" >    require(_amount != 0)</span>;
<span class="cstat-no" title="statement not covered" >    require(_validator != address(0))</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >    _delegatedAmountAdd(_staker, _validator, _amount)</span>;
<span class="cstat-no" title="statement not covered" >    _stakeAmountAdd(_validator, _amount)</span>;
&nbsp;
    // stake amount of the validator isn't greater than the max stake
<span class="cstat-no" title="statement not covered" >    require(stakeAmount(_validator) &lt;= getMaxStake())</span>;
&nbsp;
    // the validator must stake himselft the minimum stake
<span class="cstat-no" title="statement not covered" >    if (stakeAmount(_validator) &gt;= getMinStake() &amp;&amp; !isPendingValidator(_validator)) {</span>
<span class="cstat-no" title="statement not covered" >      _pendingValidatorsAdd(_validator)</span>;
<span class="cstat-no" title="statement not covered" >      _setValidatorFee(_validator, DEFAULT_VALIDATOR_FEE)</span>;
    }
&nbsp;
    // if _validator is one of the current validators
<span class="cstat-no" title="statement not covered" >    if (isValidator(_validator)) {</span>
      // the total stake needs to be adjusted for the block reward formula
<span class="cstat-no" title="statement not covered" >      _totalStakeAmountAdd(_amount)</span>;
    }
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function _withdraw(address _staker, uint256 _amount, address _validator) internal {</span>
<span class="cstat-no" title="statement not covered" >    require(_validator != address(0))</span>;
<span class="cstat-no" title="statement not covered" >    require(_amount &gt; 0)</span>;
<span class="cstat-no" title="statement not covered" >    require(_amount &lt;= stakeAmount(_validator))</span>;
<span class="cstat-no" title="statement not covered" >    require(_amount &lt;= delegatedAmount(_staker, _validator))</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >    bool _isValidator = isValidator(_validator);</span>
&nbsp;
    // if new stake amount is lesser than minStake and the validator is one of the current validators
<span class="cstat-no" title="statement not covered" >    if (stakeAmount(_validator).sub(_amount) &lt; getMinStake() &amp;&amp; _isValidator) {</span>
      // do not withdaw the amount until the validator is in current set
<span class="cstat-no" title="statement not covered" >      _pendingValidatorsRemove(_validator)</span>;
<span class="cstat-no" title="statement not covered" >      return;</span>
    }
&nbsp;
&nbsp;
<span class="cstat-no" title="statement not covered" >    _delegatedAmountSub(_staker, _validator, _amount)</span>;
<span class="cstat-no" title="statement not covered" >    _stakeAmountSub(_validator, _amount)</span>;
&nbsp;
    // if _validator is one of the current validators
<span class="cstat-no" title="statement not covered" >    if (_isValidator) {</span>
      // the total stake needs to be adjusted for the block reward formula
<span class="cstat-no" title="statement not covered" >      _totalStakeAmountSub(_amount)</span>;
    }
&nbsp;
    // if validator is needed to be removed from pending, but not current
<span class="cstat-no" title="statement not covered" >    if (stakeAmount(_validator) &lt; getMinStake()) {</span>
<span class="cstat-no" title="statement not covered" >      _pendingValidatorsRemove(_validator)</span>;
    }
<span class="cstat-no" title="statement not covered" >    _staker.transfer(_amount)</span>;
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function _setSystemAddress(address _newAddress) internal {</span>
    addressStorage[SYSTEM_ADDRESS] = _newAddress;
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function setProxyStorage(address _newAddress) external onlyOwner {</span>
<span class="cstat-no" title="statement not covered" >    require(_newAddress != address(0))</span>;
<span class="cstat-no" title="statement not covered" >    require(!boolStorage[WAS_PROXY_STORAGE_SET])</span>;
    addressStorage[PROXY_STORAGE] = _newAddress;
    boolStorage[WAS_PROXY_STORAGE_SET] = true;
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function getProxyStorage() public view returns(address) {</span>
<span class="cstat-no" title="statement not covered" >    return addressStorage[PROXY_STORAGE];</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function _setFinalized(bool _status) internal {</span>
    boolStorage[IS_FINALIZED] = _status;
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function isFinalized() public view returns(bool) {</span>
<span class="cstat-no" title="statement not covered" >    return boolStorage[IS_FINALIZED];</span>
  }
&nbsp;
  /**
  * returns maximum possible validators number
  */
<span class="fstat-no" title="function not covered" >  function getMaxValidators() public pure returns(uint256) {</span>
<span class="cstat-no" title="statement not covered" >    return MAX_VALIDATORS;</span>
  }
&nbsp;
  /**
  * returns minimum stake (wei) needed to become a validator
  */
<span class="fstat-no" title="function not covered" >  function getMinStake() public pure returns(uint256) {</span>
<span class="cstat-no" title="statement not covered" >    return MIN_STAKE;</span>
  }
&nbsp;
  /**
  * returns maximum stake (wei) for a validator
  */
<span class="fstat-no" title="function not covered" >  function getMaxStake() public pure returns(uint256) {</span>
<span class="cstat-no" title="statement not covered" >    return MAX_STAKE;</span>
  }
&nbsp;
  /**
  * @dev Function returns the minimum validator fee amount in wei
    While 100% is 1e18
  */
<span class="fstat-no" title="function not covered" >  function getMinValidatorFee() public pure returns(uint256) {</span>
<span class="cstat-no" title="statement not covered" >    return DEFAULT_VALIDATOR_FEE;</span>
  }
&nbsp;
  
&nbsp;
  /**
  * returns number of blocks per cycle (block time is 5 seconds)
  */
<span class="fstat-no" title="function not covered" >  function getCycleDurationBlocks() public pure returns(uint256) {</span>
<span class="cstat-no" title="statement not covered" >    return CYCLE_DURATION_BLOCKS;</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function _setCurrentCycle() internal {</span>
    uintStorage[CURRENT_CYCLE_START_BLOCK] = block.number;
    uintStorage[CURRENT_CYCLE_END_BLOCK] = block.number + getCycleDurationBlocks();
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function _checkJail(address[] _validatorSet) internal {</span>
<span class="cstat-no" title="statement not covered" >    uint256 expectedNumberOfBlocks = getCycleDurationBlocks().mul(VALIDATOR_PRODUCTIVITY_BP).div(_validatorSet.length).div(10000);</span>
<span class="cstat-no" title="statement not covered" >    for (uint i = 0; i &lt; _validatorSet.length; i++) {</span>
<span class="cstat-no" title="statement not covered" >      if(blockCounter(_validatorSet[i]) &lt; expectedNumberOfBlocks) {</span>
        // Validator hasn't met the desired uptime jail them and remove them from the next cycle
<span class="cstat-no" title="statement not covered" >        _jailValidator(_validatorSet[i])</span>;
      } else <span class="cstat-no" title="statement not covered" >if (getStrikes(_validatorSet[i]) != 0) {</span>
        // Validator has met desired uptime and has strikes, inc the strike reset
<span class="cstat-no" title="statement not covered" >        _incStrikeReset(_validatorSet[i])</span>;
      }
      //reset the block counter
<span class="cstat-no" title="statement not covered" >      _resetBlockCounter(_validatorSet[i])</span>;
    }
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function _removeFromJail(address _validator) internal {</span>
<span class="cstat-no" title="statement not covered" >    _jailedValidatorRemove(_validator)</span>;
<span class="cstat-no" title="statement not covered" >    if (stakeAmount(_validator) &gt;= getMinStake() &amp;&amp; !isPendingValidator(_validator)) {</span>
<span class="cstat-no" title="statement not covered" >      _pendingValidatorsAdd(_validator)</span>;
    }
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function getCurrentCycleStartBlock() external view returns(uint256) {</span>
<span class="cstat-no" title="statement not covered" >    return uintStorage[CURRENT_CYCLE_START_BLOCK];</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function getCurrentCycleEndBlock() public view returns(uint256) {</span>
<span class="cstat-no" title="statement not covered" >    return uintStorage[CURRENT_CYCLE_END_BLOCK];</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function getReleaseBlock(address _validator) public view returns(uint256) {</span>
<span class="cstat-no" title="statement not covered" >    return uintStorage[keccak256(abi.encodePacked("releaseBlock", _validator))];</span>
  }
&nbsp;
  /**
  * returns number of pending validator snapshots to be saved each cycle
  */
<span class="fstat-no" title="function not covered" >  function getSnapshotsPerCycle() public pure returns(uint256) {</span>
<span class="cstat-no" title="statement not covered" >    return SNAPSHOTS_PER_CYCLE;</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function _setLastSnapshotTakenAtBlock(uint256 _block) internal {</span>
    uintStorage[LAST_SNAPSHOT_TAKEN_AT_BLOCK] = _block;
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function getLastSnapshotTakenAtBlock() public view returns(uint256) {</span>
<span class="cstat-no" title="statement not covered" >    return uintStorage[LAST_SNAPSHOT_TAKEN_AT_BLOCK];</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function _setNextSnapshotId(uint256 _id) internal {</span>
    uintStorage[NEXT_SNAPSHOT_ID] = _id;
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function getNextSnapshotId() public view returns(uint256) {</span>
<span class="cstat-no" title="statement not covered" >    return uintStorage[NEXT_SNAPSHOT_ID];</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function _setSnapshot(uint256 _snapshotId, address[] _addresses) internal {</span>
<span class="cstat-no" title="statement not covered" >    uint256 len = _addresses.length;</span>
<span class="cstat-no" title="statement not covered" >    uint256 n = Math.min(getMaxValidators(), len);</span>
<span class="cstat-no" title="statement not covered" >    address[] memory _result = new address[](n);</span>
<span class="cstat-no" title="statement not covered" >    uint256 rand = _getSeed();</span>
<span class="cstat-no" title="statement not covered" >    for (uint256 i = 0; i &lt; n; i++) {</span>
<span class="cstat-no" title="statement not covered" >      uint256 j = rand % len;</span>
      _result[i] = _addresses[j];
      _addresses[j] = _addresses[len - 1];
      delete _addresses[len - 1];
      len--;
      rand = uint256(keccak256(abi.encodePacked(rand)));
    }
<span class="cstat-no" title="statement not covered" >    _setSnapshotAddresses(_snapshotId, _result)</span>;
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function _setSnapshotAddresses(uint256 _snapshotId, address[] _addresses) internal {</span>
    addressArrayStorage[keccak256(abi.encodePacked("snapshot", _snapshotId, "addresses"))] = _addresses;
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function getSnapshotAddresses(uint256 _snapshotId) public view returns(address[]) {</span>
<span class="cstat-no" title="statement not covered" >    return addressArrayStorage[keccak256(abi.encodePacked("snapshot", _snapshotId, "addresses"))];</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function currentValidators() public view returns(address[]) {</span>
<span class="cstat-no" title="statement not covered" >    return addressArrayStorage[CURRENT_VALIDATORS];</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function currentValidatorsLength() public view returns(uint256) {</span>
<span class="cstat-no" title="statement not covered" >    return addressArrayStorage[CURRENT_VALIDATORS].length;</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function jailedValidatorsLength() public view returns(uint256) {</span>
<span class="cstat-no" title="statement not covered" >    return addressArrayStorage[JAILED_VALIDATORS].length;</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function currentValidatorsAtPosition(uint256 _p) public view returns(address) {</span>
<span class="cstat-no" title="statement not covered" >    return addressArrayStorage[CURRENT_VALIDATORS][_p];</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function jailedValidatorsAtPosition(uint256 _p) public view returns(address) {</span>
<span class="cstat-no" title="statement not covered" >    return addressArrayStorage[JAILED_VALIDATORS][_p];</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function isValidator(address _address) public view returns(bool) {</span>
<span class="cstat-no" title="statement not covered" >    for (uint256 i; i &lt; currentValidatorsLength(); i++) {</span>
<span class="cstat-no" title="statement not covered" >      if (_address == currentValidatorsAtPosition(i)) {</span>
<span class="cstat-no" title="statement not covered" >        return true;</span>
      }
    }
<span class="cstat-no" title="statement not covered" >    return false;</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function isJailed(address _address) public view returns(bool) {</span>
<span class="cstat-no" title="statement not covered" >    for (uint256 i; i &lt; jailedValidatorsLength(); i++) {</span>
<span class="cstat-no" title="statement not covered" >      if (_address == jailedValidatorsAtPosition(i)) {</span>
<span class="cstat-no" title="statement not covered" >        return true;</span>
      }
    }
<span class="cstat-no" title="statement not covered" >    return false;</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function requiredSignatures() public view returns(uint256) {</span>
<span class="cstat-no" title="statement not covered" >    return currentValidatorsLength().div(2).add(1);</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function _currentValidatorsAdd(address _address) internal {</span>
<span class="cstat-no" title="statement not covered" >    addressArrayStorage[CURRENT_VALIDATORS].push(_address)</span>;
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function _setCurrentValidators(address[] _currentValidators) internal {</span>
<span class="cstat-no" title="statement not covered" >    uint256 totalStake = 0;</span>
<span class="cstat-no" title="statement not covered" >    for (uint i = 0; i &lt; _currentValidators.length; i++) {</span>
<span class="cstat-no" title="statement not covered" >      uint256 stakedAmount = stakeAmount(_currentValidators[i]);</span>
      totalStake = totalStake + stakedAmount;
&nbsp;
      // setting fee on all active validators to at least minimum fee
      // needs to run only once for the existing validators
<span class="cstat-no" title="statement not covered" >      uint _validatorFee = validatorFee(_currentValidators[i]);</span>
<span class="cstat-no" title="statement not covered" >      if (_validatorFee &lt; getMinValidatorFee()) {</span>
<span class="cstat-no" title="statement not covered" >        _setValidatorFee(_currentValidators[i],  getMinValidatorFee())</span>;
      }
    }
<span class="cstat-no" title="statement not covered" >    _setTotalStakeAmount(totalStake)</span>;
    addressArrayStorage[CURRENT_VALIDATORS] = _currentValidators;
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function pendingValidators() public view returns(address[]) {</span>
<span class="cstat-no" title="statement not covered" >    return addressArrayStorage[PENDING_VALIDATORS];</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function pendingValidatorsLength() public view returns(uint256) {</span>
<span class="cstat-no" title="statement not covered" >    return addressArrayStorage[PENDING_VALIDATORS].length;</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function pendingValidatorsAtPosition(uint256 _p) public view returns(address) {</span>
<span class="cstat-no" title="statement not covered" >    return addressArrayStorage[PENDING_VALIDATORS][_p];</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function jailedValidators() public view returns(address[]) {</span>
<span class="cstat-no" title="statement not covered" >    return addressArrayStorage[JAILED_VALIDATORS];</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function isPendingValidator(address _address) public view returns(bool) {</span>
<span class="cstat-no" title="statement not covered" >    for (uint256 i; i &lt; pendingValidatorsLength(); i++) {</span>
<span class="cstat-no" title="statement not covered" >      if (_address == pendingValidatorsAtPosition(i)) {</span>
<span class="cstat-no" title="statement not covered" >        return true;</span>
      }
    }
<span class="cstat-no" title="statement not covered" >    return false;</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function _jailValidator(address _address) internal {</span>
<span class="cstat-no" title="statement not covered" >    if(!isJailed(_address))</span>
    {
<span class="cstat-no" title="statement not covered" >      _pendingValidatorsRemove(_address)</span>;
<span class="cstat-no" title="statement not covered" >      _addJailedValidator(_address)</span>;
<span class="cstat-no" title="statement not covered" >      _setJailRelease(_address)</span>;
<span class="cstat-no" title="statement not covered" >      _resetStrikeReset(_address)</span>;
    }
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function _maintenance(address _address) internal {</span>
<span class="cstat-no" title="statement not covered" >    _pendingValidatorsRemove(_address)</span>;
<span class="cstat-no" title="statement not covered" >    _addJailedValidator(_address)</span>;
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function _setPendingValidatorsAtPosition(uint256 _p, address _address) internal {</span>
    addressArrayStorage[PENDING_VALIDATORS][_p] = _address;
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function _setJailedValidatorsAtPosition(uint256 _p, address _address) internal {</span>
    addressArrayStorage[JAILED_VALIDATORS][_p] = _address;
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function _pendingValidatorsAdd(address _address) internal {</span>
<span class="cstat-no" title="statement not covered" >    require(isJailed(_address) == false)</span>;
<span class="cstat-no" title="statement not covered" >    addressArrayStorage[PENDING_VALIDATORS].push(_address)</span>;
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function _addJailedValidator(address _address) internal {</span>
<span class="cstat-no" title="statement not covered" >    addressArrayStorage[JAILED_VALIDATORS].push(_address)</span>;
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function _jailedValidatorRemove(address _address) internal {</span>
<span class="cstat-no" title="statement not covered" >    bool found = false;</span>
<span class="cstat-no" title="statement not covered" >    uint256 removeIndex;</span>
    do {
      found = false;
      for (uint256 i; i &lt; jailedValidatorsLength(); i++) {
        if (_address == jailedValidatorsAtPosition(i)) {
          removeIndex = i;
          found = true;
          break;
        }
      }
      if (found) {
        uint256 lastIndex = jailedValidatorsLength() - 1;
        address lastValidator = jailedValidatorsAtPosition(lastIndex);
        if (lastValidator != address(0)) {
          _setJailedValidatorsAtPosition(removeIndex, lastValidator);
        }
        delete addressArrayStorage[JAILED_VALIDATORS][lastIndex];
        addressArrayStorage[JAILED_VALIDATORS].length--;
        // if the validator in on of the current validators
      }
    }
    while (found == true);
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function _pendingValidatorsRemove(address _address) internal {</span>
<span class="cstat-no" title="statement not covered" >    bool found = false;</span>
<span class="cstat-no" title="statement not covered" >    uint256 removeIndex;</span>
<span class="cstat-no" title="statement not covered" >    for (uint256 i; i &lt; pendingValidatorsLength(); i++) {</span>
<span class="cstat-no" title="statement not covered" >      if (_address == pendingValidatorsAtPosition(i)) {</span>
        removeIndex = i;
        found = true;
        break;
      }
    }
<span class="cstat-no" title="statement not covered" >    if (found) {</span>
<span class="cstat-no" title="statement not covered" >      uint256 lastIndex = pendingValidatorsLength() - 1;</span>
<span class="cstat-no" title="statement not covered" >      address lastValidator = pendingValidatorsAtPosition(lastIndex);</span>
<span class="cstat-no" title="statement not covered" >      if (lastValidator != address(0)) {</span>
<span class="cstat-no" title="statement not covered" >        _setPendingValidatorsAtPosition(removeIndex, lastValidator)</span>;
      }
      delete addressArrayStorage[PENDING_VALIDATORS][lastIndex];
      addressArrayStorage[PENDING_VALIDATORS].length--;
      // if the validator in on of the current validators
    }
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function stakeAmount(address _address) public view returns(uint256) {</span>
<span class="cstat-no" title="statement not covered" >    return uintStorage[keccak256(abi.encodePacked("stakeAmount", _address))];</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function totalStakeAmount() public view returns(uint256) {</span>
<span class="cstat-no" title="statement not covered" >    return uintStorage[TOTAL_STAKE_AMOUNT];</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function _stakeAmountAdd(address _address, uint256 _amount) internal {</span>
    uintStorage[keccak256(abi.encodePacked("stakeAmount", _address))] = uintStorage[keccak256(abi.encodePacked("stakeAmount", _address))].add(_amount);
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function _stakeAmountSub(address _address, uint256 _amount) internal {</span>
    uintStorage[keccak256(abi.encodePacked("stakeAmount", _address))] = uintStorage[keccak256(abi.encodePacked("stakeAmount", _address))].sub(_amount);
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function _setJailRelease(address _address) internal {</span>
<span class="cstat-no" title="statement not covered" >    uint256 strike = uintStorage[keccak256(abi.encodePacked("strikeCount", _address))];</span>
    // release block scales based on strikes, strikes get reset after undergoing STRIKE_RESET jail free cycles
    // subract one so they can flag to be released on start of the next cycle
    uintStorage[keccak256(abi.encodePacked("releaseBlock", _address))] = (getCurrentCycleEndBlock().add(getCycleDurationBlocks().mul(strike)).sub(1));
<span class="cstat-no" title="statement not covered" >    if (strike &lt;= MAX_STRIKE_COUNT) {</span>
      uintStorage[keccak256(abi.encodePacked("strikeCount", _address))] = strike + 1;
    }
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function _resetStrikes(address _address) internal {</span>
    uintStorage[keccak256(abi.encodePacked("strikeCount", _address))] = 0;
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function delegatedAmount(address _address, address _validator) public view returns(uint256) {</span>
<span class="cstat-no" title="statement not covered" >    return uintStorage[keccak256(abi.encodePacked("delegatedAmount", _address, _validator))];</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function _delegatedAmountAdd(address _address, address _validator, uint256 _amount) internal {</span>
    uintStorage[keccak256(abi.encodePacked("delegatedAmount", _address, _validator))] = uintStorage[keccak256(abi.encodePacked("delegatedAmount", _address, _validator))].add(_amount);
<span class="cstat-no" title="statement not covered" >    if (_address != _validator &amp;&amp; !isDelegator(_validator, _address)) {</span>
<span class="cstat-no" title="statement not covered" >      _delegatorsAdd(_address, _validator)</span>;
    }
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function _delegatedAmountSub(address _address, address _validator, uint256 _amount) internal {</span>
    uintStorage[keccak256(abi.encodePacked("delegatedAmount", _address, _validator))] = uintStorage[keccak256(abi.encodePacked("delegatedAmount", _address, _validator))].sub(_amount);
<span class="cstat-no" title="statement not covered" >    if (uintStorage[keccak256(abi.encodePacked("delegatedAmount", _address, _validator))] == 0) {</span>
<span class="cstat-no" title="statement not covered" >      _delegatorsRemove(_address, _validator)</span>;
    }
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function delegators(address _validator) public view returns(address[]) {</span>
<span class="cstat-no" title="statement not covered" >    return addressArrayStorage[keccak256(abi.encodePacked("delegators", _validator))];</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function delegatorsLength(address _validator) public view returns(uint256) {</span>
<span class="cstat-no" title="statement not covered" >    return addressArrayStorage[keccak256(abi.encodePacked("delegators", _validator))].length;</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function delegatorsAtPosition(address _validator, uint256 _p) public view returns(address) {</span>
<span class="cstat-no" title="statement not covered" >    return addressArrayStorage[keccak256(abi.encodePacked("delegators", _validator))][_p];</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function blockCounter(address _validator) public view returns(uint256) {</span>
<span class="cstat-no" title="statement not covered" >    return uintStorage[keccak256(abi.encodePacked("blockCounter", _validator))];</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function isDelegator(address _validator, address _address) public view returns(bool) {</span>
<span class="cstat-no" title="statement not covered" >    for (uint256 i; i &lt; delegatorsLength(_validator); i++) {</span>
<span class="cstat-no" title="statement not covered" >      if (_address == delegatorsAtPosition(_validator, i)) {</span>
<span class="cstat-no" title="statement not covered" >        return true;</span>
      }
    }
<span class="cstat-no" title="statement not covered" >    return false;</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function _setDelegatorsAtPosition(address _validator, uint256 _p, address _address) internal {</span>
    addressArrayStorage[keccak256(abi.encodePacked("delegators", _validator))][_p] = _address;
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function _delegatorsAdd(address _address, address _validator) internal {</span>
<span class="cstat-no" title="statement not covered" >    addressArrayStorage[keccak256(abi.encodePacked("delegators", _validator))].push(_address)</span>;
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function _delegatorsRemove(address _address, address _validator) internal {</span>
<span class="cstat-no" title="statement not covered" >    bool found = false;</span>
<span class="cstat-no" title="statement not covered" >    uint256 removeIndex;</span>
<span class="cstat-no" title="statement not covered" >    for (uint256 i; i &lt; delegatorsLength(_validator); i++) {</span>
<span class="cstat-no" title="statement not covered" >      if (_address == delegatorsAtPosition(_validator, i)) {</span>
        removeIndex = i;
        found = true;
        break;
      }
    }
<span class="cstat-no" title="statement not covered" >    if (found) {</span>
<span class="cstat-no" title="statement not covered" >      uint256 lastIndex = delegatorsLength(_validator) - 1;</span>
<span class="cstat-no" title="statement not covered" >      address lastDelegator = delegatorsAtPosition(_validator, lastIndex);</span>
<span class="cstat-no" title="statement not covered" >      if (lastDelegator != address(0)) {</span>
<span class="cstat-no" title="statement not covered" >        _setDelegatorsAtPosition(_validator, removeIndex, lastDelegator)</span>;
      }
      delete addressArrayStorage[keccak256(abi.encodePacked("delegators", _validator))][lastIndex];
      addressArrayStorage[keccak256(abi.encodePacked("delegators", _validator))].length--;
    }
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function getDelegatorsForRewardDistribution(address _validator, uint256 _rewardAmount) public view returns(address[], uint256[]) {</span>
<span class="cstat-no" title="statement not covered" >    address[] memory _delegators = delegators(_validator);</span>
<span class="cstat-no" title="statement not covered" >    uint256[] memory _rewards = new uint256[](_delegators.length);</span>
<span class="cstat-no" title="statement not covered" >    uint256 divider = Math.max(getMinStake(), stakeAmount(_validator));</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    for (uint256 i; i &lt; _delegators.length; i++) {</span>
<span class="cstat-no" title="statement not covered" >      uint256 _amount = delegatedAmount(delegatorsAtPosition(_validator, i), _validator);</span>
      _rewards[i] = _rewardAmount.mul(_amount).div(divider).mul(DECIMALS - validatorFee(_validator)).div(DECIMALS);
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    return (_delegators, _rewards);</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function newValidatorSet() public view returns(address[]) {</span>
<span class="cstat-no" title="statement not covered" >    return addressArrayStorage[NEW_VALIDATOR_SET];</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function newValidatorSetLength() public view returns(uint256) {</span>
<span class="cstat-no" title="statement not covered" >    return addressArrayStorage[NEW_VALIDATOR_SET].length;</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function _setNewValidatorSet(address[] _newSet) internal {</span>
    addressArrayStorage[NEW_VALIDATOR_SET] = _newSet;
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function _setTotalStakeAmount(uint256 _totalStake) internal {</span>
    uintStorage[TOTAL_STAKE_AMOUNT] = _totalStake;
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function _totalStakeAmountAdd(uint256 _stakeAmount) internal {</span>
    uintStorage[TOTAL_STAKE_AMOUNT] = uintStorage[TOTAL_STAKE_AMOUNT].add(_stakeAmount);
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function _totalStakeAmountSub(uint256 _stakeAmount) internal {</span>
    uintStorage[TOTAL_STAKE_AMOUNT] = uintStorage[TOTAL_STAKE_AMOUNT].sub(_stakeAmount);
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function shouldEmitInitiateChange() public view returns(bool) {</span>
<span class="cstat-no" title="statement not covered" >    return boolStorage[SHOULD_EMIT_INITIATE_CHANGE];</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function _setShouldEmitInitiateChange(bool _status) internal {</span>
    boolStorage[SHOULD_EMIT_INITIATE_CHANGE] = _status;
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function _hasCycleEnded() internal view returns(bool) {</span>
<span class="cstat-no" title="statement not covered" >    return (block.number &gt;= getCurrentCycleEndBlock());</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function _getSeed() internal view returns(uint256) {</span>
<span class="cstat-no" title="statement not covered" >    return uint256(keccak256(abi.encodePacked(blockhash(block.number - 1))));</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function _getRandom(uint256 _from, uint256 _to) internal view returns(uint256) {</span>
<span class="cstat-no" title="statement not covered" >    return _getSeed().mod(_to.sub(_from)).add(_from);</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function validatorFee(address _validator) public view returns(uint256) {</span>
<span class="cstat-no" title="statement not covered" >    return uintStorage[keccak256(abi.encodePacked("validatorFee", _validator))];</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function _setValidatorFee(address _validator, uint256 _amount) internal {</span>
    uintStorage[keccak256(abi.encodePacked("validatorFee", _validator))] = _amount;
  }
&nbsp;
  /**
  * Internal function to be called from cycle() to increment the block counter for this validator. 
  * block counter is used to assess the validators uptime in a given cycle. It is zeroed at the start of each cycle.
  */
<span class="fstat-no" title="function not covered" >  function _incBlockCounter(address _validator) internal {</span>
    uintStorage[keccak256(abi.encodePacked("blockCounter", _validator))] = uintStorage[keccak256(abi.encodePacked("blockCounter", _validator))] + 1;
  }
&nbsp;
  /**
  * Internal function to be called on cycle end to reset the block counter for a validator so we are ready for the new cycle
  */
<span class="fstat-no" title="function not covered" >  function _resetBlockCounter(address _validator) internal {</span>
    uintStorage[keccak256(abi.encodePacked("blockCounter", _validator))] = 0;
  }
&nbsp;
  /**
  * Internal function to be called each time a validator has had a clean cycle. the strike reset counter is used to reset a validator strike count
  * if it exceeds the reset threshold
  */
<span class="fstat-no" title="function not covered" >  function _incStrikeReset(address _validator) internal {</span>
    uintStorage[keccak256(abi.encodePacked("strikeReset", _validator))] = uintStorage[keccak256(abi.encodePacked("strikeReset", _validator))] + 1;
<span class="cstat-no" title="statement not covered" >    if (uintStorage[keccak256(abi.encodePacked("strikeReset", _validator))] &gt; STRIKE_RESET)</span>
    {
      // Strike count exceeds the reset criteria, reset the strike and reset counters back to zero.
<span class="cstat-no" title="statement not covered" >      _resetStrikeReset(_validator)</span>;
<span class="cstat-no" title="statement not covered" >      _resetStrikes(_validator)</span>;
    }
  }
&nbsp;
  /**
  * Internal function to be called after a validator has had STRIKE_RESET clean cycles.
  */
<span class="fstat-no" title="function not covered" >  function _resetStrikeReset(address _validator) internal {</span>
    uintStorage[keccak256(abi.encodePacked("strikeReset", _validator))] = 0;
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function getStrikeReset(address _validator) public view returns(uint256) {</span>
<span class="cstat-no" title="statement not covered" >    return uintStorage[keccak256(abi.encodePacked("strikeReset", _validator))];</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function getStrikes(address _validator) public view returns(uint256) {</span>
<span class="cstat-no" title="statement not covered" >    return uintStorage[keccak256(abi.encodePacked("strikeCount", _validator))];</span>
  }
}
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Tue Jan 23 2024 13:38:02 GMT+0100 (GMT+01:00)
</div>
</div>
<script src="../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../sorter.js"></script>
</body>
</html>
