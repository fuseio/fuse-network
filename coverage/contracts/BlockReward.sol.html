<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for contracts/BlockReward.sol</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../prettify.css" />
    <link rel="stylesheet" href="../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../index.html">all files</a> / <a href="index.html">contracts/</a> BlockReward.sol
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>0/47</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>0/34</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>0/22</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>0/61</span>
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">pragma solidity ^0.4.24;
&nbsp;
import "./abstracts/BlockRewardBase.sol";
import "./interfaces/IConsensus.sol";
import "./eternal-storage/EternalStorage.sol";
import "./ProxyStorage.sol";
import "openzeppelin-solidity/contracts/math/SafeMath.sol";
&nbsp;
/**
* @title Contract handling block reward logic
* @author LiorRabin
*/
contract BlockReward is EternalStorage, BlockRewardBase {
  using SafeMath for uint256;
&nbsp;
  uint256 public constant DECIMALS = 10 ** 18;
  uint256 public constant INFLATION = 5;
  uint256 public constant BLOCKS_PER_YEAR = 6307200;
&nbsp;
  /**
  * @dev This event will be emitted every block, describing the rewards given
  * @param receivers array of addresses to reward
  * @param rewards array of balance increases corresponding to the receivers array
  */
  event Rewarded(address[] receivers, uint256[] rewards);
&nbsp;
  /**
  * @dev This event will be emitted on cycle end, describing the amount of rewards distributed on the cycle
  * @param amount total rewards distributed on this cycle
  */
  event RewardedOnCycle(uint256 amount);
&nbsp;
  /**
  * @dev This modifier verifies that msg.sender is the system address (EIP96)
  */
<span class="fstat-no" title="function not covered" >  modifier onlySystem() {</span>
<span class="cstat-no" title="statement not covered" >    require(msg.sender == addressStorage[SYSTEM_ADDRESS])</span>;
    _;
  }
&nbsp;
  /**
  * @dev This modifier verifies that msg.sender is the owner of the contract
  */
<span class="fstat-no" title="function not covered" >  modifier onlyOwner() {</span>
<span class="cstat-no" title="statement not covered" >    require(msg.sender == addressStorage[OWNER])</span>;
    _;
  }
&nbsp;
  /**
  * @dev This modifier verifies that msg.sender is the consensus contract
  */
<span class="fstat-no" title="function not covered" >  modifier onlyConsensus() {</span>
<span class="cstat-no" title="statement not covered" >    require(msg.sender == ProxyStorage(getProxyStorage()).getConsensus())</span>;
    _;
  }
&nbsp;
  /**
  * @dev This modifier verifies that msg.sender is a validator
  */
<span class="fstat-no" title="function not covered" >  modifier onlyValidator() {</span>
<span class="cstat-no" title="statement not covered" >    require(IConsensus(ProxyStorage(getProxyStorage()).getConsensus()).isValidator(msg.sender))</span>;
    _;
  }
&nbsp;
  /**
  * @dev Function to be called on contract initialization
  */
<span class="fstat-no" title="function not covered" >  function initialize(uint256 _supply) external onlyOwner {</span>
<span class="cstat-no" title="statement not covered" >    require(!isInitialized())</span>;
<span class="cstat-no" title="statement not covered" >    _setSystemAddress(0xffffFFFfFFffffffffffffffFfFFFfffFFFfFFfE)</span>;
<span class="cstat-no" title="statement not covered" >    _setTotalSupply(_supply)</span>;
<span class="cstat-no" title="statement not covered" >    _initRewardedOnCycle()</span>;
<span class="cstat-no" title="statement not covered" >    _setBlockRewardAmount()</span>;
<span class="cstat-no" title="statement not covered" >    setInitialized(true)</span>;
  }
&nbsp;
  /**
  * @dev Function called to produce the reward on each block
  * @param benefactors array of addresses representing benefectors to be considered for reward
  * @param kind array of reward types. We support only arrays with one item and type = 0 (Author - Reward attributed to the block author)
  * See https://wiki.parity.io/Block-Reward-Contract.html
  */
<span class="fstat-no" title="function not covered" >  function reward(address[] benefactors, uint16[] kind) external onlySystem returns (address[], uint256[]) {</span>
<span class="cstat-no" title="statement not covered" >    require(benefactors.length == kind.length)</span>;
<span class="cstat-no" title="statement not covered" >    require(benefactors.length == 1)</span>;
<span class="cstat-no" title="statement not covered" >    require(kind[0] == 0)</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >    uint256 blockRewardAmount = getBlockRewardAmountPerValidator(benefactors[0]);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    (address[] memory _delegators, uint256[] memory _rewards) = IConsensus(ProxyStorage(getProxyStorage()).getConsensus()).getDelegatorsForRewardDistribution(benefactors[0], blockRewardAmount);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    address[] memory receivers = new address[](_delegators.length + 1);</span>
<span class="cstat-no" title="statement not covered" >    uint256[] memory rewards = new uint256[](receivers.length);</span>
&nbsp;
    receivers[0] = benefactors[0];
    rewards[0] = blockRewardAmount;
<span class="cstat-no" title="statement not covered" >    for (uint256 i = 1; i &lt;= _delegators.length; i++) {</span>
      receivers[i] = _delegators[i - 1];
      rewards[i] = _rewards[i - 1];
      rewards[0] = rewards[0].sub(rewards[i]);
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    _setRewardedOnCycle(getRewardedOnCycle().add(blockRewardAmount))</span>;
<span class="cstat-no" title="statement not covered" >    _setTotalSupply(getTotalSupply().add(blockRewardAmount))</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >    if ((block.number).mod(getBlocksPerYear()) == 0) {</span>
<span class="cstat-no" title="statement not covered" >      _setBlockRewardAmount()</span>;
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    IConsensus(ProxyStorage(getProxyStorage()).getConsensus()).cycle(benefactors[0])</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >    emit Rewarded(receivers, rewards);</span>
<span class="cstat-no" title="statement not covered" >    return (receivers, rewards);</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function onCycleEnd() external onlyConsensus {</span>
<span class="cstat-no" title="statement not covered" >    _setShouldEmitRewardedOnCycle(true)</span>;
  }
&nbsp;
  /**
  * @dev Function to be called by validators only to emit RewardedOnCycle event (only if `shouldEmitRewardedOnCycle` returns true)
  */
<span class="fstat-no" title="function not covered" >  function emitRewardedOnCycle() external onlyValidator {</span>
<span class="cstat-no" title="statement not covered" >    require(shouldEmitRewardedOnCycle())</span>;
<span class="cstat-no" title="statement not covered" >    emit RewardedOnCycle(getRewardedOnCycle());</span>
<span class="cstat-no" title="statement not covered" >    _setShouldEmitRewardedOnCycle(false)</span>;
<span class="cstat-no" title="statement not covered" >    _setRewardedOnCycle(0)</span>;
  }
&nbsp;
  bytes32 internal constant OWNER = keccak256(abi.encodePacked("owner"));
  bytes32 internal constant SYSTEM_ADDRESS = keccak256(abi.encodePacked("SYSTEM_ADDRESS"));
  bytes32 internal constant PROXY_STORAGE = keccak256(abi.encodePacked("proxyStorage"));
  bytes32 internal constant TOTAL_SUPPLY = keccak256(abi.encodePacked("totalSupply"));
  bytes32 internal constant REWARDED_THIS_CYCLE = keccak256(abi.encodePacked("rewardedOnCycle"));
  bytes32 internal constant BLOCK_REWARD_AMOUNT = keccak256(abi.encodePacked("blockRewardAmount"));
  bytes32 internal constant SHOULD_EMIT_REWARDED_ON_CYCLE = keccak256(abi.encodePacked("shouldEmitRewardedOnCycle"));
&nbsp;
<span class="fstat-no" title="function not covered" >  function _setSystemAddress(address _newAddress) private {</span>
    addressStorage[SYSTEM_ADDRESS] = _newAddress;
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function _setTotalSupply(uint256 _supply) private {</span>
<span class="cstat-no" title="statement not covered" >    require(_supply &gt;= 0)</span>;
    uintStorage[TOTAL_SUPPLY] = _supply;
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function getTotalSupply() public view returns(uint256) {</span>
<span class="cstat-no" title="statement not covered" >    return uintStorage[TOTAL_SUPPLY];</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function _initRewardedOnCycle() private {</span>
<span class="cstat-no" title="statement not covered" >    _setRewardedOnCycle(0)</span>;
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function _setRewardedOnCycle(uint256 _amount) private {</span>
<span class="cstat-no" title="statement not covered" >    require(_amount &gt;= 0)</span>;
    uintStorage[REWARDED_THIS_CYCLE] = _amount;
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function getRewardedOnCycle() public view returns(uint256) {</span>
<span class="cstat-no" title="statement not covered" >    return uintStorage[REWARDED_THIS_CYCLE];</span>
  }
&nbsp;
  /**
  * returns yearly inflation rate (percentage)
  */
<span class="fstat-no" title="function not covered" >  function getInflation() public pure returns(uint256) {</span>
<span class="cstat-no" title="statement not covered" >    return INFLATION;</span>
  }
&nbsp;
  /**
  * returns blocks per year (block time is 5 seconds)
  */
<span class="fstat-no" title="function not covered" >  function getBlocksPerYear() public pure returns(uint256) {</span>
<span class="cstat-no" title="statement not covered" >    return BLOCKS_PER_YEAR;</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function _setBlockRewardAmount() private {</span>
    uintStorage[BLOCK_REWARD_AMOUNT] = (getTotalSupply().mul(getInflation().mul(DECIMALS).div(100))).div(getBlocksPerYear()).div(DECIMALS);
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function getBlockRewardAmount() public view returns(uint256) {</span>
<span class="cstat-no" title="statement not covered" >    return uintStorage[BLOCK_REWARD_AMOUNT];</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function getBlockRewardAmountPerValidator(address _validator) public view returns(uint256) {</span>
<span class="cstat-no" title="statement not covered" >    IConsensus consensus = IConsensus(ProxyStorage(getProxyStorage()).getConsensus());</span>
<span class="cstat-no" title="statement not covered" >    uint256 stakeAmount = consensus.stakeAmount(_validator);</span>
<span class="cstat-no" title="statement not covered" >    uint256 totalStakeAmount = consensus.totalStakeAmount();</span>
<span class="cstat-no" title="statement not covered" >    uint256 currentValidatorsLength = consensus.currentValidatorsLength();</span>
    // this may arise in peculiar cases when the consensus totalStakeAmount wasn't calculated yet
    // for example at the first blocks after the contract was deployed
<span class="cstat-no" title="statement not covered" >    if (totalStakeAmount == 0) {</span>
<span class="cstat-no" title="statement not covered" >      return getBlockRewardAmount();</span>
    }
<span class="cstat-no" title="statement not covered" >    return getBlockRewardAmount().mul(stakeAmount).mul(currentValidatorsLength).div(totalStakeAmount);</span>
  }
&nbsp;
&nbsp;
<span class="fstat-no" title="function not covered" >  function getProxyStorage() public view returns(address) {</span>
<span class="cstat-no" title="statement not covered" >    return addressStorage[PROXY_STORAGE];</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function shouldEmitRewardedOnCycle() public view returns(bool) {</span>
<span class="cstat-no" title="statement not covered" >    return IConsensus(ProxyStorage(getProxyStorage()).getConsensus()).isFinalized() &amp;&amp; boolStorage[SHOULD_EMIT_REWARDED_ON_CYCLE];</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function _setShouldEmitRewardedOnCycle(bool _status) internal {</span>
    boolStorage[SHOULD_EMIT_REWARDED_ON_CYCLE] = _status;
  }
}
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Tue Jan 23 2024 13:38:02 GMT+0100 (GMT+01:00)
</div>
</div>
<script src="../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../sorter.js"></script>
</body>
</html>
